<div class="category-sidebar">
  <!-- Header sa search-om -->
  <div class="sidebar-header">
    <h3 class="sidebar-title">
      <i class="fas fa-tags me-2"></i>
      Kategorije
    </h3>
    <div class="search-box">
      <i class="fas fa-search search-icon"></i>
      <input 
        type="text" 
        placeholder="Pretraži kategorije..." 
        class="search-input"
        (input)="onSearch($event)">
    </div>
  </div>

  <div class="category-list">
    <!-- Sve kategorije sa posebnim efektom -->
    <div 
      class="category-item all-categories" 
      [class.active]="selectedCategoryId === null"
      (click)="selectCategory(null)">
      <div class="category-content">
        <div class="category-icon">
          <i class="fas fa-grid-2"></i>
        </div>
        <span class="category-text">Svi proizvodi</span>
      </div>
      <div class="product-count">{{ totalProducts }}</div>
    </div>

    <!-- Glavne kategorije -->
    <div *ngFor="let category of getFilteredParentCategories()" class="category-group">
      <div 
        class="category-item main-category" 
        [class.active]="selectedCategoryId === category.id"
        [class.expanded]="isExpanded(category.id)"
        (click)="toggleCategory(category.id)">
        
        <div class="category-content">
          <div class="category-icon">
            <i [class]="getCategoryIcon(category.name)"></i>
          </div>
          <span class="category-text">{{ category.name }}</span>
        </div>
        
        <div class="category-actions">
          <span class="product-count">{{ getCategoryProductCount(category.id) }}</span>
          <span *ngIf="getSubcategories(category.id).length > 0" class="toggle-icon">
            <i class="fas fa-chevron-down"></i>
          </span>
        </div>
      </div>
      
      <!-- Podkategorije sa animacijom -->
      <div 
        *ngIf="getSubcategories(category.id).length > 0" 
        class="subcategories"
        [class.show]="isExpanded(category.id)">
        
        <div 
          *ngFor="let subcategory of getFilteredSubcategories(category.id)"
          class="category-item subcategory"
          [class.active]="selectedCategoryId === subcategory.id"
          (click)="selectCategory(subcategory.id)">
          
          <div class="category-content">
            <div class="subcategory-indicator"></div>
            <div class="category-icon">
              <i class="fas fa-angle-right"></i>
            </div>
            <span class="category-text">{{ subcategory.name }}</span>
          </div>
          <div class="product-count">{{ getCategoryProductCount(subcategory.id) }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="getFilteredParentCategories().length === 0" class="empty-state">
    <i class="fas fa-search-empty empty-icon"></i>
    <p class="empty-text">Nema pronađenih kategorija</p>
  </div>

  <!-- Footer sa statistikkom -->
  <div class="sidebar-footer">
    <div class="stats">
      <div class="stat-item">
        <span class="stat-number">{{ categories.length }}</span>
        <span class="stat-label">Kategorija</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ totalProducts }}</span>
        <span class="stat-label">Proizvoda</span>
      </div>
    </div>
  </div>
</div>