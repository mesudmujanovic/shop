<nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
  <div class="container-fluid">
    <!-- Hamburger dugme -->
    <button class="navbar-toggler hamburger-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <!-- Logo -->
    <a class="navbar-brand" href="#">
      <img src="agestop.jpg" alt="Logo">
    </a>
  
    
    <!-- Desktop meni -->
    <div class="collapse navbar-collapse desktop-menu" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link" routerLink="/home" routerLinkActive="active">
            <i class="fas fa-home nav-icon"></i>
            Home
          </a>
        </li>
        
        <!-- Shop dropdown sa hover efektom -->
        <li class="nav-item shop-dropdown"
              #shopDropdown
              (mouseenter)="onShopEnter()" 
              (mouseleave)="onShopLeave()">
                    
          <a class="nav-link dropdown-toggle" 
             routerLinkActive="active">
            <i class="fas fa-shopping-bag nav-icon"></i>
            Shop
            <i class="fas fa-chevron-down ms-1 arrow-icon"></i>
          </a>
          
          <!-- Dropdown meni -->
          <div class="dropdown-menu"   #dropdownMenu
                [class.show]="showDropdown"
                (mouseenter)="onDropdownEnter()"
                (mouseleave)="onDropdownLeave()">
            
         <!-- Svi proizvodi -->
<div class="dropdown-section all-products">
  <a class="dropdown-item"
     (click)="navigateToAllProducts($event)"
     routerLinkActive="active">
     
    <div class="category-info">
      <div class="category-icon">
        <i class="fas fa-grid-2"></i>
      </div>
      <div class="category-details">
        <span class="category-name">Svi proizvodi</span>
      </div>
    </div>

  </a>
</div>
            
            <!-- Glavne kategorije -->
            <div class="dropdown-section">
              <div class="dropdown-header">Kategorije</div>
              <a *ngFor="let category of shopCategories"
                 class="dropdown-item" 
                 (click)="navigateToCategory(category.id, $event)"
                 [routerLink]="['/products']" 
                 [queryParams]="{ category: category.id }"
                 routerLinkActive="active">
                
                <div class="category-info">
                  <div class="category-icon">
                    <i [class]="category.icon"></i>
                  </div>
                  <div class="category-details">
                    <span class="category-name">{{ category.name }}</span>
                    <span class="product-count">{{ category.productCount }}</span>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" routerLink="/blog" routerLinkActive="active">
            <i class="fas fa-blog nav-icon"></i>
            Blog
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/about" routerLinkActive="active">
            <i class="fas fa-info-circle nav-icon"></i>
            Info
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/contact" routerLinkActive="active">
            <i class="fas fa-envelope nav-icon"></i>
            Contact
          </a>
        </li>
      </ul>
    </div>
    <!-- Desktop korpa -->
    <a class="nav-link desktop-cart" routerLink="/cart" routerLinkActive="active">
      <i class="fas fa-shopping-cart nav-icon"></i>
      <span class="cart-text">Korpa</span>
      <span class="cart-badge" *ngIf="cartItemCount > 0">
        {{ cartItemCount }}
        <span class="pulse-effect"></span>
      </span>
    </a>

      <li class="nav-item desktop-login">
            <a class="nav-link" routerLink="/login" routerLinkActive="active">
          <i class="fas fa-sign-in-alt nav-icon"></i>
        </a>
      </li>

  </div>
  
  <!-- Pozadinski efekti -->
  <div class="nav-background">
    <div class="bg-shape shape1"></div>
    <div class="bg-shape shape2"></div>
    <div class="bg-shape shape3"></div>
  </div>
</nav>

<!-- Mobilni meni (Offcanvas) -->
<div class="offcanvas offcanvas-start mobile-sidebar" tabindex="-1" id="mobileMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Meni</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div class="nav-links-container">
      <a class="nav-link" href="#" routerLinkActive="active" data-bs-dismiss="offcanvas">
        <i class="fas fa-home nav-icon"></i>
        Home
      </a>
      
      <!-- Shop u mobilnom meniju -->
      <div class="mobile-shop-section">
  <a class="nav-link shop-title" data-bs-toggle="collapse" href="#shopCollapse">
    <i class="fas fa-shopping-bag nav-icon"></i>
    Shop
    <i class="fas fa-chevron-down ms-auto arrow-icon"></i>
  </a>
  
  <div class="collapse" id="shopCollapse">
    <div class="mobile-shop-links">
      <!-- Svi proizvodi -->
      <a class="nav-link" 
         (click)="navigateToAllProducts($event)"
         data-bs-dismiss="offcanvas">
        <i class="fas fa-grid-2"></i>
        Svi proizvodi
      </a>
      
      <!-- Kategorije -->
      <div class="mobile-category-header">Kategorije</div>
      <a class="nav-link" 
         *ngFor="let category of shopCategories"
         (click)="navigateToCategory(category.id, $event)"
         data-bs-dismiss="offcanvas">
        <i [class]="category.icon"></i>
        {{ category.name }}
        <span class="mobile-product-count">{{ category.productCount }}</span>
      </a>
      

    </div>
  </div>
</div>
      
      <a class="nav-link" href="#" routerLinkActive="active" data-bs-dismiss="offcanvas">
        <i class="fas fa-blog nav-icon"></i>
        Blog
      </a>
      <a class="nav-link" href="#" routerLinkActive="active" data-bs-dismiss="offcanvas">
        <i class="fas fa-info-circle nav-icon"></i>
        Info
      </a>
      <a class="nav-link" href="#" routerLinkActive="active" data-bs-dismiss="offcanvas">
        <i class="fas fa-envelope nav-icon"></i>
        Contact
      </a>
      
      <!-- Mobilna korpa -->
      <a class="nav-link mobile-cart" routerLink="/cart" routerLinkActive="active" data-bs-dismiss="offcanvas">
        <i class="fas fa-shopping-cart nav-icon"></i>
        Korpa
        <span class="cart-badge" *ngIf="cartItemCount > 0">
          {{ cartItemCount }}
          <span class="pulse-effect"></span>
        </span>
      </a>

        <a class="nav-link mobile-login" 
          [routerLink]="isLoggedIn ? '/profile' : '/login'" 
          routerLinkActive="active" 
          data-bs-dismiss="offcanvas">
          <i class="fas" [ngClass]="isLoggedIn ? 'fa-user-circle' : 'fa-sign-in-alt'"></i>
          {{ isLoggedIn ? 'Profil' : 'Login' }}
          <span class="login-status" *ngIf="isLoggedIn">
            <i class="fas fa-circle online-indicator"></i>
          </span>
        </a>
    </div>
  </div>
</div>