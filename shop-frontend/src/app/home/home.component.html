<div class="hero">
  <!-- Desktop slika (sakrivena na mobile) -->
  <img src="home.jpg.webp" alt="Uvodna slika" class="hero-img desktop-img">
  
  <!-- Mobile slika (sakrivena na desktop) -->
  <img src="homemob.webp" alt="Uvodna slika" class="hero-img mobile-img">
</div>


<section class="bestseller-section" *ngIf="bestsellers.length > 0">
     <div *ngIf="message" 
         [class]="message.includes('Greška') ? 'message-error' : 'message-success'">
      <i [class]="message.includes('Greška') ? 'fas fa-exclamation-triangle' : 'fas fa-check-circle'"></i>
      {{ message }}
    </div>

  <!-- Section Header -->
  <div class="section-header">
    <h2 class="section-title">BESTSELLER PROIZVODI</h2>
    <p class="section-subtitle">Najtraženiji proizvodi koje naši kupci obožavaju</p>
  </div>

  <!-- Slider Container -->
  <div class="slider-wrapper">
    
    <!-- Prev Button -->
    <button class="slider-arrow prev" (click)="prevSlide()" [disabled]="currentSlide === 0">
      <i class="fas fa-chevron-left"></i>
    </button>

    <!-- Slider Container -->
    <div class="slider-container" #sliderContainer
     (touchstart)="onTouchStart($event)"
  (touchmove)="onTouchMove($event)"
  (touchend)="onTouchEnd($event)">
      
      <!-- Slider Track -->
      <div 
        class="slider-track" 
        [style.transform]="'translateX(' + (-currentSlide * 100) + '%)'"
        [style.transition]="isAnimating ? 'transform 0.5s ease' : 'none'"
      >
        
        <!-- Slides -->
        <div class="slide" *ngFor="let product of bestsellers; let i = index">
          <div class="product-card">
            
            <!-- Product Image -->
            <div class="product-image">
              <img 
                [src]="getProductImage(product)" 
                [alt]="product.name"
                (error)="handleImageError($event)"
                class="product-img">
              <div class="product-badge">BESTSELLER</div>
            </div>
            
            <!-- Product Info -->
            <div class="product-info">
              <h3 class="product-title">{{ product.name }}</h3>
        
              <!-- Price -->
              <div class="product-price">
                <span class="current-price">{{ product.price }} €</span>
              </div>
              
              <!-- Actions -->
              <div class="product-actions">
                <button class="btn-view" [routerLink]="['/products', product.id]">
                  <i class="fas fa-eye"></i> Detalji
                </button>
               <button 
              (click)="addToCart(product)" 
              [disabled]="product.stock === 0"
              class="add-to-cart-btn"
              [class.disabled]="product.stock === 0">
              
              <span class="btn-content">
                <i class="fas fa-shopping-cart"></i>
                {{ product.stock === 0 ? 'Nema na stanju' : 'Dodaj u korpu' }}
              </span>
              
              <span class="btn-loader">
                <i class="fas fa-spinner fa-spin"></i>
              </span>
            </button>
              </div>
            </div>
            
          </div>
        </div>
        
      </div>
    </div>

    <!-- Next Button -->
    <button class="slider-arrow next" (click)="nextSlide()" [disabled]="currentSlide >= maxSlides">
      <i class="fas fa-chevron-right"></i>
    </button>

  </div>

  <!-- Dots Navigation -->
  <div class="slider-dots">
    <span 
      *ngFor="let dot of getDotsArray(); let i = index" 
      class="dot" 
      [class.active]="currentSlide === i"
      (click)="goToSlide(i)">
    </span>
  </div>

</section>

<section class="home-hero">
  <div class="hero-container">
    <div class="hero-content">
      <div class="hero-text">
        <div class="hero-subtitle">INSPIRISANO PRIRODOM</div>
        <h1 class="hero-title">USAVRŠENO<br><span class="highlight">ZNANOŠĆU</span></h1>
        <h2 class="hero-process">NAŠ PROCES FORMULACIJE</h2>
        
        <p class="hero-description">
          S ponosom predstavljamo jedinstvene švajcarske sastojke protiv starenja u našim proizvodima kao što su: 
          <span class="ingredients">
            Swiss Snow Algae, Swiss Royal Epigen P5 peptid, Swiss Black Bee Biome, Swiss IceAwake i Swiss Plant PhytoCellTec Stem Cell Science.
          </span>
        </p>
        
        <button class="hero-button">
          <span class="button-text">Pogledaj proizvode</span>
          <span class="button-icon">→</span>
        </button>
      </div>
      
      <div class="hero-gallery">
        <div class="gallery-container">
          <div class="gallery-grid">
            <div class="gallery-item item-1">
              <div class="image-wrapper">
                <img src="img2.webp" alt="Proizvod" class="gallery-image">
                <div class="image-overlay">
                  <span>Swiss Snow Algae</span>
                </div>
              </div>
            </div>
            
            <div class="gallery-item item-2">
              <div class="image-wrapper">
                <img src="img3.webp" alt="Model" class="gallery-image">
                <div class="image-overlay">
                  <span>Swiss Royal Epigen P5</span>
                </div>
              </div>
            </div>
            
            <div class="gallery-item item-3">
              <div class="image-wrapper">
                <img src="img4.webp" alt="Model" class="gallery-image">
                <div class="image-overlay">
                  <span>Swiss Black Bee Biome</span>
                </div>
              </div>
            </div>
            
            <div class="gallery-item item-4">
              <div class="image-wrapper">
                <img src="img5.webp" alt="Model" class="gallery-image">
                <div class="image-overlay">
                  <span>Swiss IceAwake</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="floating-badge">
            <div class="badge-content">
              <span class="badge-text">Švajcarska<br>tehnologija</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="hero-scroll">
      <div class="scroll-indicator">
        <span class="scroll-text">Scroll to explore</span>
        <div class="scroll-line"></div>
      </div>
    </div>
  </div>
</section>

<app-category-slider [categories]="categories"></app-category-slider>
